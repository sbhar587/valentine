<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Valentine Mission</title>
  <style>
    :root{
      --yes-scale: 1;
      --bg1: #ff4d6d;
      --bg2: #ff8fab;
      --bg3: #ffd6e0;
      --ink: #1f2937;
    }

    * { box-sizing: border-box; }
    body{
      margin:0;
      min-height:100vh;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--ink);
      overflow: hidden;
      background: radial-gradient(circle at 20% 10%, #fff 0 12%, transparent 13%),
                  radial-gradient(circle at 80% 20%, #fff 0 10%, transparent 11%),
                  linear-gradient(135deg, var(--bg1), var(--bg2), var(--bg3));
      background-size: 220px 220px, 260px 260px, 100% 100%;
      animation: bgShift 8s ease-in-out infinite alternate;
      display:grid;
      place-items:center;
      padding: 18px;
    }

    @keyframes bgShift{
      from { filter: hue-rotate(0deg) saturate(1.1); }
      to   { filter: hue-rotate(18deg) saturate(1.25); }
    }

    .card{
      width: min(620px, 100%);
      background: rgba(255,255,255,0.82);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.7);
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.18);
      padding: 26px 22px;
      text-align:center;
      position: relative;
    }

    .badge{
      display:inline-flex;
      gap:10px;
      align-items:center;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,0.9);
      border: 1px solid rgba(0,0,0,0.06);
      font-weight: 700;
      font-size: 13px;
      letter-spacing: 0.2px;
    }

    h1{
      margin: 14px 0 10px;
      font-size: clamp(26px, 4vw, 38px);
      line-height: 1.1;
    }

    #prompt{
      margin: 0 0 16px;
      font-size: clamp(16px, 2.5vw, 20px);
    }

    .buttons{
      display:flex;
      justify-content:center;
      gap: 12px;
      flex-wrap: wrap;
      margin-top: 8px;
    }

    button{
      border: 0;
      border-radius: 14px;
      padding: 12px 18px;
      font-size: 18px;
      cursor: pointer;
      font-weight: 700;
      transition: transform 140ms ease, filter 140ms ease, box-shadow 140ms ease;
      user-select: none;
    }

    button:active{ transform: translateY(1px) scale(0.99); }

    #yesBtn{
      background: linear-gradient(135deg, #ff0054, #ff7aa2);
      color: white;
      box-shadow: 0 12px 28px rgba(255,0,84,0.35);
      transform: scale(var(--yes-scale));
      transform-origin: center;
    }
    #yesBtn:hover{ filter: brightness(1.05); }

    #noBtn{
      background: rgba(17,24,39,0.08);
      color: #111827;
      box-shadow: 0 10px 18px rgba(0,0,0,0.08);
    }
    #noBtn:hover{ filter: brightness(1.03); }

    .row{
      margin-top: 14px;
      display:flex;
      gap: 10px;
      justify-content:center;
      flex-wrap: wrap;
    }

    .mini{
      font-size: 13px;
      opacity: 0.75;
    }

    .musicBtn{
      background: rgba(255,255,255,0.9);
      border: 1px solid rgba(0,0,0,0.08);
      color: #111827;
      font-weight: 700;
      padding: 10px 14px;
      border-radius: 999px;
      cursor: pointer;
    }

    .pulseHeart{
      display:inline-block;
      margin-left: 6px;
      animation: pulse 1.2s ease-in-out infinite;
      transform-origin: center;
    }
    @keyframes pulse{
      0%,100%{ transform: scale(1); }
      50%{ transform: scale(1.25); }
    }

    /* Floating hearts layer */
    .hearts{
      position: fixed;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
    }
    .heart{
      position: absolute;
      bottom: -40px;
      width: 18px;
      height: 18px;
      transform: rotate(45deg);
      opacity: 0.9;
      animation: floatUp var(--dur) linear infinite;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,0.15));
    }
    .heart::before,
    .heart::after{
      content:"";
      position:absolute;
      width: 18px;
      height: 18px;
      background: var(--c);
      border-radius: 50%;
    }
    .heart::before{ left: -9px; top: 0; }
    .heart::after{ left: 0; top: -9px; }
    .heart{ background: var(--c); }

    @keyframes floatUp{
      0%   { transform: translateY(0) rotate(45deg) scale(var(--s)); }
      100% { transform: translateY(-120vh) rotate(45deg) scale(var(--s)); }
    }

    /* Confetti */
    .confetti{
      position: fixed;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
    }
    .confetti i{
      position:absolute;
      top:-20px;
      width: 10px;
      height: 16px;
      background: var(--cc);
      opacity: 0.95;
      transform: rotate(var(--r));
      animation: confFall var(--cd) ease-in forwards;
      border-radius: 3px;
    }
    @keyframes confFall{
      to{
        transform: translateY(110vh) rotate(calc(var(--r) + 240deg));
      }
    }

    .shake{
      animation: shake 220ms ease-in-out 1;
    }
    @keyframes shake{
      0%{ transform: translateX(0); }
      25%{ transform: translateX(-4px); }
      50%{ transform: translateX(4px); }
      75%{ transform: translateX(-3px); }
      100%{ transform: translateX(0); }
    }

    .success{
      background: rgba(255,255,255,0.9);
      border: 2px dashed rgba(255,0,84,0.35);
    }

    .note{
      margin-top: 10px;
      font-size: 12px;
      opacity: 0.75;
    }
  </style>
</head>
<body>
  <div class="hearts" id="hearts"></div>
  <div class="confetti" id="confetti"></div>

  <div class="card" id="card">
    <div class="badge">
      Valentine Mission
      <span class="pulseHeart">♥</span>
    </div>

    <h1 id="title">Will you be my Valentine?</h1>
    <p id="prompt">This is a very serious questionnaire.</p>

    <div class="buttons">
      <button id="yesBtn" type="button">Yes</button>
      <button id="noBtn" type="button">No</button>
    </div>

    <div class="row">
      <button class="musicBtn" id="musicBtn" type="button">Play music</button>
      <div class="mini" id="counter"></div>
    </div>

    <div class="note">Tip: music usually starts after a tap for browser reasons.</div>
  </div>

  <script>
    // Funny escalation lines
    const prompts = [
      "No?? Bold choice. Are you sure?",
      "Are you REALLY sure?",
      "Think again. I’ll wait.",
      "This is a legally binding vibe check.",
      "Incorrect answer detected. Try again.",
      "Your finger slipped. You meant YES.",
      "Be honest: you’re smiling, aren’t you?",
      "I can do this all day. Yes?",
      "Final answer? Choose wisely.",
      "Okay. I’m making the Yes button huge now."
    ];

    let noCount = 0;
    let yesScale = 1;

    const title = document.getElementById("title");
    const prompt = document.getElementById("prompt");
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const counter = document.getElementById("counter");
    const card = document.getElementById("card");
    const hearts = document.getElementById("hearts");
    const confetti = document.getElementById("confetti");
    const musicBtn = document.getElementById("musicBtn");

    function setYesScale(value) {
      yesScale = value;
      document.documentElement.style.setProperty("--yes-scale", String(yesScale));
    }

    // Floating hearts generator
    function spawnHeart() {
      const h = document.createElement("div");
      h.className = "heart";
      const colors = ["#ff0054", "#ff4d6d", "#ff8fab", "#ffd6e0", "#7c3aed", "#22c55e"];
      const c = colors[Math.floor(Math.random() * colors.length)];
      const left = Math.random() * 100;
      const dur = 5 + Math.random() * 5;
      const s = 0.8 + Math.random() * 1.6;
      h.style.setProperty("--c", c);
      h.style.setProperty("--dur", dur + "s");
      h.style.setProperty("--s", s.toFixed(2));
      h.style.left = left + "vw";
      hearts.appendChild(h);
      setTimeout(() => h.remove(), (dur * 1000) + 200);
    }

    // Start hearts
    const heartTimer = setInterval(spawnHeart, 220);

    // Confetti burst
    function burstConfetti() {
      const colors = ["#ff0054", "#ff4d6d", "#ff8fab", "#ffd6e0", "#f59e0b", "#22c55e", "#3b82f6", "#7c3aed"];
      for (let i = 0; i < 120; i++) {
        const piece = document.createElement("i");
        const x = Math.random() * 100;
        const cd = 1.6 + Math.random() * 1.6;
        const r = Math.floor(Math.random() * 360) + "deg";
        const cc = colors[Math.floor(Math.random() * colors.length)];
        piece.style.left = x + "vw";
        piece.style.setProperty("--cd", cd + "s");
        piece.style.setProperty("--r", r);
        piece.style.setProperty("--cc", cc);
        confetti.appendChild(piece);
        setTimeout(() => piece.remove(), cd * 1000 + 200);
      }
    }

    // Simple built-in "love music" using Web Audio (no external files)
    // Note: still requires a user tap to start on most browsers.
    let audioCtx = null;
    let playing = false;
    let stopFn = null;

    function startMusic() {
      if (playing) return;
      audioCtx = audioCtx || new (window.AudioContext || window.webkitAudioContext)();

      const master = audioCtx.createGain();
      master.gain.value = 0.08; // keep it gentle
      master.connect(audioCtx.destination);

      const tempo = 92; // bpm-ish
      const beat = 60 / tempo;

      const notes = [
        523.25, 587.33, 659.25, 587.33, // C5 D5 E5 D5
        523.25, 493.88, 440.00, 493.88, // C5 B4 A4 B4
        523.25, 587.33, 659.25, 783.99, // C5 D5 E5 G5
        659.25, 587.33, 523.25, 493.88  // E5 D5 C5 B4
      ];

      let t = audioCtx.currentTime + 0.05;

      function playTone(freq, startTime, dur) {
        const o = audioCtx.createOscillator();
        const g = audioCtx.createGain();

        o.type = "sine";
        o.frequency.value = freq;

        // soft envelope
        g.gain.setValueAtTime(0.0001, startTime);
        g.gain.exponentialRampToValueAtTime(0.9, startTime + 0.02);
        g.gain.exponentialRampToValueAtTime(0.0001, startTime + dur);

        o.connect(g);
        g.connect(master);

        o.start(startTime);
        o.stop(startTime + dur + 0.01);
      }

      let alive = true;

      function loop() {
        if (!alive) return;

        // schedule 2 bars ahead
        for (let i = 0; i < notes.length; i++) {
          const dur = beat * 0.9;
          playTone(notes[i], t + i * beat, dur);
        }
        t += notes.length * beat;

        setTimeout(loop, notes.length * beat * 1000 * 0.6);
      }

      loop();

      stopFn = () => {
        alive = false;
      };

      playing = true;
      musicBtn.textContent = "Pause music";
    }

    function stopMusic() {
      if (!playing) return;
      playing = false;
      musicBtn.textContent = "Play music";
      if (stopFn) stopFn();
      stopFn = null;
      // Close context to stop lingering sound
      if (audioCtx) {
        audioCtx.close();
        audioCtx = null;
      }
    }

    musicBtn.addEventListener("click", async () => {
      if (!playing) startMusic();
      else stopMusic();
    });

    yesBtn.addEventListener("click", () => {
      // Try to start music on Yes if not started
      if (!playing) startMusic();

      title.textContent = "Correct. Obviously. ♥";
      prompt.textContent = "It’s a date. Happy Valentine’s Day!";
      card.classList.add("success");
      burstConfetti();

      yesBtn.disabled = true;
      noBtn.disabled = true;
      counter.textContent = "";
      clearInterval(heartTimer);
    });

    noBtn.addEventListener("click", () => {
      noCount += 1;

      const nextPrompt = prompts[(noCount - 1) % prompts.length];
      prompt.textContent = nextPrompt;

      // Bigger Yes each time
      setYesScale(1 + noCount * 0.22);

      // Small shake for comedy
      card.classList.remove("shake");
      void card.offsetWidth;
      card.classList.add("shake");

      counter.textContent = `No clicks: ${noCount}`;

      // After many no's, gently "retire" the no button (optional funny)
      if (noCount >= 10) {
        noBtn.textContent = "I changed my mind";
      }
    });

    // Spawn a few hearts immediately
    for (let i = 0; i < 12; i++) setTimeout(spawnHeart, i * 80);
  </script>
</body>
</html>
